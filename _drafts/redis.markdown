---
layout: default
title: "Redis"
date: 2022-03-14 00:03:16 +0900
categories: Redis
---

**레디스란?**

DB, 캐시, 메시지 브로커 등으로 사용하는 in-memory data structure store이다.  
in-memory 데이터 구조와 Single thread 방식으로 빠른 속도를 자랑한다.

<br>

**In-memory**  
데이터를 메모리에 읽고 쓴다. 몇몇 기능을 제외한 대부분의 연산을 메모리 상에서 실행하기 때문에 빠르다.
key-value 쌍의 해시 테이블 방식으로 데이터를 읽고 쓴다고 보면 된다.

이게 속도와 왜 관련이 있는 건가 싶었는데, MySql만 봐도 InnDB에서는 buffer pool이라는 메모리 공간을 사용하여 인덱스와 데이터를 저장해둔다. 자주 읽는 데이터는 page 단위로 캐싱하여 사용하기 때문에 미처 캐싱이 안된 데이터를 읽는다면 디스크에서 데이터를 읽는 추가 작업이 필요하다. 물론 충분히 빠르지만서도 메모리와 디스크라는 물리적으로 엄연한 차이에서 발생하는 속도 이슈가 있으며 redis는 메모리 상에서만 데이터를 읽고 쓰기 때문에 빠른 속도를 보장한다.

<br>

**Single Thread**  
레디스를 처음 접한다면 가장 많이 듣는 단어가 아닐까 싶다. Single Thread라서 빠르다는데 무슨 소리인가 싶었다. 여기서 Single Thread는 명령어를 처리하는 프로세스가 싱글 스레드를 사용한다는 거지 레디스의 모든 기능을 싱글 스레드로 구현했다는 것은 아니다.  
예를 들어, AOF 설정을 해두면 fork를 하는데 이 때도 다른 스레드를 사용한다.

<br>

장점:
multi-threaded context switching

단점:
처리 시간이 오래 걸리는 명령어 주의  
싱글 스레드로 명령어를 처리하기 때문에 앞선 명령어를 처리하는데 시간이 오래 걸린다면 이후의 명령어들은 모두 blocking 된다.
예를 들면 keys 명령어
